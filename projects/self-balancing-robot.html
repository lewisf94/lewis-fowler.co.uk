<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Self-Balancing Robot | Lewis Fowler</title>
  <link rel="stylesheet" href="../assets/css/styles.css" />
</head>
<body>
  <main class="main">
    <section class="section">
      <h2 class="section__title">Self-Balancing Robot</h2>
      <span class="section__subtitle">A deep dive into control systems and embedded electronics</span>

      <div class="projects__container container">
        
        <div class="projects__card">
          <i class="uil uil-robot projects__icon"></i>
          <h3 class="projects__title">Introduction</h3>
          <p class="projects__description">
            Creating a self-balancing robot is a rite of passage in the world of electronics—it's the "Hello, World!" of hardware projects. My goal was to build a robot that could stand upright on two wheels, a simple concept that requires a surprisingly complex control system to manage its inherent instability.
            <br><br>
            This project was an incredible learning experience in control theory, motor drivers, and microcontrollers, culminating in a fully functioning balancing system.
          </p>
        </div>
        
        <div class="projects__card">
          <i class="uil uil-microchip projects__icon"></i>
          <h3 class="projects__title">The Components</h3>
          <p class="projects__description">
            The brain of the operation is an <strong>ESP32 Dev Board</strong>, chosen for its built-in Wi-Fi and Bluetooth, which opens the door for future ROS 2 integration. I sourced most of the other components from previous kits.
          </p>
          <ul class="projects__description">
            <li><strong>Microcontroller:</strong> ESP32 Dev Board (WROOM-32D)</li>
            <li><strong>IMU:</strong> MPU-6050 Gyroscope & Accelerometer</li>
            <li><strong>Motors:</strong> 2x "Yellow" DC Geared Motors</li>
            <li><strong>Driver:</strong> TB6612FNG</li>
            <li><strong>Power:</strong> PowerBoost 1000C & 2000 mAh Li-ion</li>
            <li><strong>Display:</strong> SSD1306 OLED for real-time data</li>
            <li><strong>Chassis:</strong> Custom 3D printed frame</li>
          </ul>
        </div>

        <div class="project-story__section" style="grid-column: span 2;">
          <div class="project-story__image-container">
            <img src="../assets/img/about.jpg" alt="ESP32 connected to a breadboard" class="project-story__image">
          </div>
          <div class="project-story__text-container">
            <h3 class="projects__title">A "No-Gloss" Build Log</h3>
            <p class="projects__description">Electronics projects rarely work perfectly on the first try. Here are some of the key challenges I troubleshooted:</p>
            <ul class="projects__description">
              <li><strong>The "Chicken-and-Egg" Trap:</strong> The PowerBoost 1000C wouldn't turn on because its enable (EN) pin was wired to its own output. The fix was tying the enable pin to the battery rail—a power source that exists at startup.</li>
              <li><strong>Voltage Dips & Resets:</strong> High motor current caused the main power rail to dip, resetting the screen. A large 100µF capacitor across the motor driver's power lines solved it.</li>
              <li><strong>Flux-Induced Bugs:</strong> After soldering, the low-battery indicator LED lit up even with a full battery. The culprit was a microscopic bridge of flux residue. Cleaning with isopropyl alcohol (IPA) cleared the issue.</li>
              <li><strong>Motor Whine:</strong> The ESP32's default 1 kHz PWM frequency produced an audible screech. Switching to the dedicated LEDC peripheral to generate a silent 20 kHz PWM signal fixed it.</li>
            </ul>
          </div>
        </div>

        <div class="project-story__section project-story__section--reversed" style="grid-column: span 2;">
          <div class="project-story__image-container">
            <img src="../assets/img/self-balancing.png" alt="A render of the self-balancing robot" class="project-story__image">
          </div>
          <div class="project-story__text-container">
            <h3 class="projects__title">The Control System: From P to PID</h3>
            <p class="projects__description">
                The robot's ability to balance comes from a PID control loop that adjusts motor speeds in real-time. The MPU-6050 measures the robot's tilt angle (pitch), and the controller's job is to drive that angle to zero.
                <br><br>
                I started with a simple <strong>Proportional (P) controller</strong>, where motor speed is directly proportional to the tilt angle. This provided basic balancing, but it was prone to oscillations. To achieve true stability, I implemented a full PID loop:
            </p>
            <ul class="projects__description">
                <li><strong>Integral (I):</strong> This term looks at the accumulated error over time, correcting for persistent leans that the P-term alone would ignore.</li>
                <li><strong>Derivative (D):</strong> This term acts as the robot's reflexes. It measures how fast the robot is falling and applies a counteracting force to dampen the motion and prevent overshoot.</li>
            </ul>
          </div>
        </div>
        
        <div class="projects__card" style="grid-column: span 2;">
          <i class="uil uil-play-circle projects__icon"></i>
          <h3 class="projects__title">Video Demo</h3>
          <div class="iframe__container">
            <iframe class="iframe" src="https://www.youtube.com/embed/your_video_id" title="Self-Balancing Robot Demo" allowfullscreen></iframe>
          </div>
        </div>
        
        <div class="projects__card" style="grid-column: span 2;">
          <i class="uil uil-lightbulb-alt projects__icon"></i>
          <h3 class="projects__title">Next Steps on the Roadmap</h3>
          <p class="projects__description">
            With the foundational hardware tested, the next phase is to fine-tune the control loop and expand the robot's capabilities.
          </p>
          <ul class="projects__description">
            <li><strong>Refine the Full PID Controller:</strong> The next major step is to tune the Integral (Ki) and Derivative (Kd) gains to create a critically damped system that is both responsive and stable.</li>
            <li><strong>Improve Angle Estimation:</strong> I plan to implement a <strong>complementary filter</strong> or a <strong>Kalman filter</strong> to fuse data from both the gyroscope and accelerometer for a more accurate and stable angle reading.</li>
            <li><strong>ROS 2 Integration:</strong> For higher-level control, I will integrate the robot with the Robot Operating System (ROS 2), allowing the ESP32 to publish sensor data and subscribe to commands.</li>
          </ul>
        </div>
        
        <div class="projects__card">
          <i class="uil uil-cube projects__icon"></i>
          <h3 class="projects__title">CAD & Fabrication</h3>
          <p class="projects__description">The custom chassis was designed in SolidWorks and 3D printed with black PLA+.</p>
          <a href="../assets/files/self-balancing-robot-cad.stl" class="button button--small button--link">Download STL</a>
        </div>
        <div class="projects__card">
          <i class="uil uil-github projects__icon"></i>
          <h3 class="projects__title">Source Code</h3>
          <p class="projects__description">All code, diagrams, and build logs are available on GitHub.</p>
          <a href="https://github.com/lewisf94/self-balancing-robot" target="_blank" class="button button--small button--flex">
            View on GitHub <i class="uil uil-arrow-right button__icon"></i>
          </a>
        </div>
        
        <div class="projects__card" style="grid-column: span 2;">
          <i class="uil uil-arrow-left projects__icon"></i>
          <h3 class="projects__title">Return to Projects</h3>
          <a href="../index.html#projects" class="button button--flex">
            ← Back to Main Page
          </a>
        </div>

      </div>
    </section>
  </main>
</body>
</html>